/*!
 * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see https://ckeditor.com/legal/ckeditor-oss-license
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CKEditor5=e():(t.CKEditor5=t.CKEditor5||{},t.CKEditor5.exportInlineStylesAdapter=e())}(self,(()=>(()=>{"use strict";var t={d:(e,i)=>{for(var o in i)t.o(i,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:i[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>i});const i={ExportInlineStylesAdapter:class{constructor(t){this.editor=t,this.form=this.editor.sourceElement.closest("form"),this.disabledAttributeName="data-ckeditor5-block-"+this.editor.id}init(){const t=this.editor,e=this.editor.config._config.exportInlineStyles.formElement,i=document.getElementById(e);if(!i)return;if(!this.editor.commands.get("exportInlineStyles"))return;const o=this.editor.plugins.has("SourceEditing")?this.editor.plugins.get("SourceEditing"):null;o&&o.on("change:isSourceEditingMode",((t,e,i,o)=>{i?(console.log("source enabled"),this.disableSubmitButtons()):(console.log("source disabled"),this.enableSubmitButtons())}));let r=!1;this.form.addEventListener("submit",(e=>{if(r)return;e.preventDefault();let o=t.execute("exportInlineStyles");o instanceof Promise&&o.then((t=>{i.value=t,console.log("Exported inline styles")})).then((()=>{const t=e.submitter.id;document.getElementById(t).click(),r=!0,console.log("Form submitted with inline styles")})).catch((t=>{const i=e.submitter.id;document.getElementById(i).click(),console.error("Error exporting inline styles")}))}))}disableSubmitButtons(){this.form&&(this.submitElements=this.form.querySelectorAll('input[type="submit"], button[type="submit"]'),Array.from(this.submitElements).forEach((t=>{t.disabled=!0,t.setAttribute(this.disabledAttributeName,!0)})))}enableSubmitButtons(){this.form&&Array.from(this.submitElements).forEach((t=>{t.removeAttribute(this.disabledAttributeName),this.hasDataBlockedAttribute(t)||(t.disabled=!1)}))}hasDataBlockedAttribute(t){if(!t||!t.hasAttributes())return!1;for(let e of t.attributes)if(e.name.startsWith("data-ckeditor5-block-"))return!0;return!1}}};return e=e.default})()));